---
description: Public API export files and README organization patterns - keep exports separate from implementation, keep READMEs as summaries
alwaysApply: true
---

# Public API Export and README File Patterns

Keep public API export files for exports only. Keep README files as summaries with links to detailed docs.

## Core Principles

1. **Discoverability**: Files should be findable by their descriptive names, not generic export file names
2. **Public API Boundary**: Export files define what's public, implementation files contain the code
3. **Documentation Hierarchy**: READMEs provide overview, separate files contain details

## Public API Export Files

**Rule: Public API export files should ONLY contain exports - never implementation code**

Common export file patterns across languages:
- TypeScript/JavaScript: `index.ts`, `index.js`
- Python: `__init__.py`
- Rust: `mod.rs`, `lib.rs`
- Go: package-level files

### Pattern

```typescript
/**
 * [Module Name] - Public API
 * Brief description. See ./implementation for details.
 */

export { MainClass, helperFunction } from './implementation'
export type { PublicType, Options } from './implementation'
```

### Examples

✅ **Good - Exports only:**
```typescript
// lib/client/index.ts
export { createClient, Client } from './client'
export type { ClientConfig } from './client'
```

```python
# lib/client/__init__.py
from .client import Client, create_client
from .types import ClientConfig

__all__ = ['Client', 'create_client', 'ClientConfig']
```

❌ **Bad - Implementation in export file:**
```typescript
// lib/client/index.ts
export class Client {
  // 200 lines of implementation...
}
```

### Entry Points Exception

Entry point export files may import for side effects:

```typescript
// content/index.ts
import './content-script'  // ✅ Acceptable for entry points
```

```python
# __main__.py
from .app import main
main()  # ✅ Acceptable for entry points
```

## README Files

**Rule: READMEs are summaries (< 100 lines) with links to detailed docs**

### Pattern

```markdown
# Module Name

Brief description (2-3 sentences max).

## Quick Start

```[language]
// Minimal example
```

## Documentation

- **[Topic](./topic.md)** - Description
- **[Reference](./reference.md)** - Description

## Key Features

- Feature 1
- Feature 2
```

### When to Extract Docs

Split README when it exceeds ~100 lines or covers multiple topics:

- **Specifications**: `protocol.md`, `specification.md`
- **API Reference**: `api-reference.md`, `api.md`
- **Guides**: `best-practices.md`, `guidelines.md`
- **Architecture**: `structure.md`, `architecture.md`

## File Naming

Implementation files use descriptive names that indicate content:

✅ **Good:**
- `orchestrator.ts`, `orchestrator.py` - Orchestrator implementation
- `prompt_loader.py`, `prompt-loader.ts` - Prompt loading utilities
- `client.rs`, `client.go` - API client

❌ **Avoid:**
- `utils.*`, `helpers.*` - Too generic
- `main.*`, `core.*` - Not descriptive (unless true entry point)
- `module/module_thing.*` - Redundant directory prefix

Documentation files use descriptive, prefixed names:

✅ **Good:**
- `protocol-spec.md`, `api-reference.md` - Clear context
- `authoring-guidelines.md` - Descriptive

❌ **Avoid:**
- `api.md`, `docs.md` - Too generic
- `AuthoringGuidelines.md` - Use kebab-case

## Example

**Before:**
```
lib/service/
  └── index.ts (300 lines - implementation + exports)
  └── README.md (250 lines - all documentation)
```
Problem: Can't find "service" - file search only shows "index" or "__init__"

**After:**
```
lib/service/
  ├── index.ts (8 lines - exports only)
  ├── service.ts (292 lines - implementation)
  ├── README.md (60 lines - summary + links)
  ├── api-reference.md (100 lines)
  └── best-practices.md (90 lines)
```
Result: File search for "service" finds implementation immediately

## Benefits

- **Findable**: File searches find implementation by descriptive name, not generic export file name
- **Navigable**: README provides quick overview without overwhelming detail
- **Maintainable**: Separate concerns (API vs implementation) are easier to update
- **Clear API**: Export files define explicit public interface boundaries
